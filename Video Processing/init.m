clear all

%%Load camarea parameters and masks
load stereoParams
load Extrinsics
load Masks
cameraParams=stereoParams.CameraParameters1;

%Generate camera callibration mapping
boardSize=[7 7];
squareSize = 212.5;
imagePoints= [546.9122  375.9198;...
    537.7519  311.1870;...
    530.4237  251.9504;...
    522.4847  196.9885;...
    516.9885  147.5229;...
    510.8817  100.5000;...
    477.2939  375.9198;...
    472.4084  314.2405;...
    467.5229  257.4466;...
    464.4695  204.9275;...
    461.4160  157.9046;...
    458.9733  112.1031;...
    415.6145  375.9198;...
    412.5611  317.9046;...
    410.1183  264.1641;...
    408.8969  214.0878;...
    407.6756  167.6756;...
    407.0649  124.9275;...
    359.4313  375.9198;...
    359.4313  320.9580;...
    359.4313  269.6603;...
    360.0420  222.0267;...
    359.4313  175.6145;...
    359.4313  134.6985;...
    309.3550  375.9198;...
    311.7977  322.7901;...
    313.6298  273.9351;...
    315.4618  226.9122;...
    317.2939  182.9427;...
    320.3473  143.8588;...
    262.9427  377.1412;...
    269.0496  325.8435;...
    271.4924  277.5992;...
    273.9351  232.4084;...
    276.9885  189.0496;...
    280.0420  153.0191];
worldPoints = generateCheckerboardPoints(boardSize, squareSize);
[rotationMatrix,translationVector] = extrinsics(imagePoints,worldPoints,cameraParams);

%Set drop position for horizontal initial condition
horizDropPoint=[108.8893  160.1644; 33.1046  347.5985];
horizStart = triangulate(horizDropPoint(1,:),horizDropPoint(2,:),stereoParams);